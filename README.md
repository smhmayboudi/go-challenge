# go-challenge

## Note

در این برنامه سعی می شود که موارد ذیل پوشش داده شود.
- سرویس دهی یک اندپوینت برای دریافت آخرین تغییرات نرخ داده ها
- یک برنامه کامند لاین برای پرکردن داده ها یا اینجسشن با سرعت بالا

قابل توجه می باشد:
با توجه به بیزینس شرکت کاملا پروژه درستی انتخاب شده است و با توجه به اینکه در فایل به پرفرمنس تاکید شده است سعی بنده در اتمام انجام آن به صورت ساده و در حد زمان ۳ ساعت می باشد.

## نحوه انجام پروژه

- اول یک کامپوز فایل ایجاد شده است
- در داخل کامپوز سرویس دیتا بیس تعریف شده است
- در داخل کامپوز سرویس مایگریشن تعریف شده است
- قسمت اصلی سرویس بر اساس ساده ترین حالت نوشته شده است
- برای سادگی از او ار ام گرم استفاده شده است
- خطاها به صورت پنیک برگشت داده می شود جالب نمی باشد ولی برای سرعت کار انجام شده است
- فایل مودل برای نمونه سازی جداسازی کد تعریف شده است

## The Idea

ایده هایی که در هر بخش فکر کردم مهم است را به صورت خیلی سریع با کمترین فکر نوشت شده است.

برای سرویس اند پوینت حالت های تعامل با سیستم عامل که سرویس قراره بسته شود در نظر گرفته شد.

برای برنامه ورود اطلاعات باید توجه داشت که بخاطر نیاز به سرعت بالا برای کار با ای او می توان این را در نظر گرفت که اطلاعات به صورت بچ به پایگاه داده ارسال می شود. می توان کانکشن پول به صورت محدود ایجاد کرد و به تعداد کانکشن پول ها گرین ترد ایجاد کرد و هرکدام سعی در ورود اطلاعات کنند.

## QUERY

```SQL
SELECT 'Instrument'.'Name', 'Trade'.'DateEn', 'Trade'.'Open', 'Trade'.'High', 'Trade'.'Low', 'Trade'.'Close' FROM Instrument RIGHT JOIN Trade ON 'Instrument'.'Id' = 'Trade'.'InstrumentId'
```

## Improvment Points

نکات ذیل می توانیم در ادامه کار بهینه سازی نماییم.

- از متغیر 'DB' باید استفاده می کردم که به دلیل زمان کم نتوانستم پوشش بدهم.
- انجام عملیاتی کار
- بنچ مارک ورود اطالاعات
- اپلای کردن کویری در برنامه
- می توانی برای کویری ها از تایپ سیف استفاده کنید

## Question

الان داشتم برای یک شرکت امتحان می دادم لطفا این سوال جایی داده نشود

مدت زمان اجرا ۳ ساعت می باشد

١- با توجه به اسکیمای دیتابیس داده شده، یک کوئری بنویسید که در یک گزارش، آخرین معامله هر یک از نمادها را در کنار نام آنها برگرداند.

- جدول Instrument شامل لیستی از نمادهای معاملاتی بورس است.
- جدول Trade شامل تاریخچه معاملات روزانه همهی نماد ها است.
- به ازای هر Instrument در هر روز ممکن است دقیقا یک و حداقل هیچ داده معامله روزانهای برای یک نماد موجود باشد.
(ممکن است نماد در آن روز به هر علتی معامله نداشته باشد).
- برای تست و اجرای کوئری خود میتوانید از postgresql یا از sqlfiddle.com استفاده کنید.

CREATE TABLE Instrument(Id int, Name varchar(255));
CREATE TABLE Trade(Id int, InstrumentId int, DateEn timestamptz, Open decimal, High decimal, Low decimal, Close decimal);

INSERT INTO Instrument values(1,'AAPL'), (2,'GOOGL');
INSERT INTO Trade VALUES
(1, 1, '2020-01-01', 1001, 2001, 301, 401),
(2, 1, '2020-01-02', 1002, 2002, 302, 402),
(3, 1, '2020-01-03', 1003, 2003, 303, 403),
(4, 2, '2020-01-01', 1004, 2004, 304, 404),
(5, 2, '2020-01-03', 1005, 2005, 305, 405),
(6, 5, '2020-01-01', 1006, 2006, 306, 406),
(7, 1, '2021-01-01', 1007, 2007, 307, 407);

٢- یک مایکروسرویس بنویسید که شامل فقط یک متد HTTP API باشد که کوئری بالا را اجرا کرده و نتیجه را به صورت JSON برمیگرداند.
- برای HTTP API از REST پیروی کنید - فرض کنید که سرویس نیاز به بهترین Throughput دارد و برای HTTP API و همینطور اتصال به postgresql از بهترین پکیجی که فکر میکنید مناسب است استفاده کنید

٣- در کنار پروژه فوق یک برنامه CLI بنویسید که جدول Trade که در سؤال قبل ساخته شده را با دادههای رندوم و با بیشترین سرعت ممکن پر میکند.
- برنامه یک پارامتر به عنوان تعداد رکوردهایی که تولید میکند دریافت کند

نکات کلی:
- سادگی، مدیریت خطا، پرفورمنس و خوانایی کد از اهمیت بالایی برخوردار است، سعی کنید کدی بنویسید که در نزدیک ترین حالت به Idiomatic Go قرار دارد

